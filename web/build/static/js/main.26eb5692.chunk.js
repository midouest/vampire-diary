(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{109:function(e,t,r){},112:function(e,t,r){"use strict";r.r(t);r(94),r(95);var n=r(0),a=r.n(n),c=r(19),i=r.n(c),s=r(61),o=r(6),l=function(){return Object(s.b)()},u=s.c,d=r(117),j=r(128),b=r(65),h=r(92),p=r(7),m=r(8),v=r.n(m),O=r(13),f=r(10),x=r(2);function y(e){return function(t,r){var n,a=null!==r&&void 0!==r?r:{};return a.headers=Object(x.a)(Object(x.a)({},e),null!==(n=a.headers)&&void 0!==n?n:{}),fetch(t,a)}}function g(e,t){return k.apply(this,arguments)}function k(){return(k=Object(O.a)(v.a.mark((function e(t,r){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/api/v1/auth/login/",{method:"POST",body:JSON.stringify(r)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,n.ok){e.next=8;break}throw new Error(a);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return w.apply(this,arguments)}function w(){return(w=Object(O.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/api/v1/auth/logout/",{method:"POST"});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S="vampire-diary-auth-token";var I=Object(f.b)("auth/login",function(){var e=Object(O.a)(v.a.mark((function e(t,r){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=y({"Content-Type":"application/json",Accept:"application/json"}),e.next=3,g(n,t);case 3:return a=e.sent,localStorage.setItem(S,a.key),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());function N(e){var t=e.getState().auth.token;if(null===t)throw new Error("Must be logged in");return function(e){return y(Object(x.a)(Object(x.a)({},{"Content-Type":"application/json",Accept:"application/json"}),function(e){return{Authorization:"Token ".concat(e)}}(e)))}(t)}var E=Object(f.b)("auth/logout",function(){var e=Object(O.a)(v.a.mark((function e(t,r){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(r),e.next=3,C(n);case 3:localStorage.removeItem(S);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),D=Object(f.d)({name:"auth",initialState:{token:localStorage.getItem(S)},reducers:{},extraReducers:function(e){return e.addCase(I.fulfilled,(function(e,t){e.token=t.payload.key})).addCase(E.fulfilled,(function(e,t){e.token=null}))}});function A(e){return null!==e.auth.token}var T=r(1);function M(){var e=u(A),t=l(),r=Object(n.useState)(""),a=Object(o.a)(r,2),c=a[0],i=a[1],s=Object(n.useState)(""),m=Object(o.a)(s,2),v=m[0],O=m[1];return e?Object(T.jsx)(p.a,{to:"/vampires"}):Object(T.jsx)(d.a,{children:Object(T.jsxs)(j.a,{children:[Object(T.jsxs)(b.a,{className:"mt-3",children:[Object(T.jsx)(j.a.Label,{children:"Username"}),Object(T.jsx)(j.a.Control,{placeholder:"Username",onChange:function(e){return i(e.target.value)}})]}),Object(T.jsxs)(b.a,{className:"mt-3",children:[Object(T.jsx)(j.a.Label,{children:"Password"}),Object(T.jsx)(j.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return O(e.target.value)}})]}),Object(T.jsx)(h.a,{variant:"outline-primary",className:"mt-3",onClick:function(){return t(I({username:c,password:v}))},children:"Log In"})]})})}function F(e){var t=e.children;return u(A)?t:Object(T.jsx)(p.a,{to:"/login"})}var B={show:500,hide:0},L=r(122),V=r(121),R=r(90),P=r(123),G=r(125),q=r(118),K=r(33),H=r(32),J=r(31),U=r(130),Y=r(119),z=r(88),_=r(15),Q=r(20);function W(e,t){var r=t.queryApi,n=t.createApi,a=t.retrieveApi,c=t.updateApi,i=t.removeApi;return{query:Object(f.b)("".concat(e,"/query"),(function(e,t){var n=N(t);return r(n,e)})),create:Object(f.b)("".concat(e,"/create"),(function(e,t){var r=N(t);return n(r,e)})),retrieve:Object(f.b)("".concat(e,"/retrieve"),(function(e,t){var r=N(t);return a(r,e)})),update:Object(f.b)("".concat(e,"/update"),(function(e,t){var r=N(t);return c(r,e)})),remove:Object(f.b)("".concat(e,"/remove"),function(){var e=Object(O.a)(v.a.mark((function e(t,r){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=N(r),e.next=3,i(n,t);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())}}var X=r(3);function Z(e,t){var r=null;return void 0!==t&&(r=function(e){var t={},r=!1;if(e.search&&(r=!0,t.search=e.search),e.filter)for(var n=0,a=Object.entries(e.filter);n<a.length;n++){var c=Object(o.a)(a[n],2),i=c[0],s=c[1];r=!0,t[i]=s.toString()}return e.sort&&(r=!0,t.ordering="".concat(e.sort[1]).concat(e.sort[0])),void 0!==e.limit&&(r=!0,t.limit=e.limit.toString()),void 0!==e.offset&&(r=!0,t.offset=e.offset.toString()),r?new URLSearchParams(t):null}(t)),null!==r?"".concat(e,"?").concat(r):e}function $(e){function t(){return(t=Object(O.a)(v.a.mark((function t(r,n){var a,c,i;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Z(e,n),t.next=3,r(a);case 3:return c=t.sent,t.next=6,c.json();case 6:if(i=t.sent,c.ok){t.next=9;break}throw new Error(i.detail);case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function r(){return(r=Object(O.a)(v.a.mark((function t(r,n){var a,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(e,{method:"POST",body:JSON.stringify(n)});case 2:return a=t.sent,t.next=5,a.json();case 5:if(c=t.sent,a.ok){t.next=8;break}throw new Error(c.detail);case 8:return t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function n(t){return"".concat(e).concat(t,"/")}function a(){return(a=Object(O.a)(v.a.mark((function e(t,r){var a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n(r));case 2:return a=e.sent,e.next=5,a.json();case 5:if(c=e.sent,a.ok){e.next=8;break}throw new Error(c.detail);case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=Object(O.a)(v.a.mark((function e(t,r){var a,c,i,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.id,c=Object(X.a)(r,["id"]),e.next=3,t(n(a),{method:"PATCH",body:JSON.stringify(c)});case 3:return i=e.sent,e.next=6,i.json();case 6:if(s=e.sent,i.ok){e.next=9;break}throw new Error(s.detail);case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(O.a)(v.a.mark((function e(t,r){var a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n(r),{method:"DELETE"});case 2:if((a=e.sent).ok){e.next=8;break}return e.next=6,a.json();case 6:throw c=e.sent,new Error(c.detail);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{queryApi:function(e,r){return t.apply(this,arguments)},createApi:function(e,t){return r.apply(this,arguments)},retrieveApi:function(e,t){return a.apply(this,arguments)},updateApi:function(e,t){return c.apply(this,arguments)},removeApi:function(e,t){return i.apply(this,arguments)}}}function ee(){return(ee=Object(O.a)(v.a.mark((function e(t,r){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/api/v1/game/vampires/".concat(r,"/deep/"));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return"/api/v1/game/".concat(e,"/")}var re=$(te("events")),ne=$(te("memories")),ae=$(te("experiences")),ce=$(te("skills")),ie=$(te("resources")),se=$(te("characters")),oe=$(te("marks")),le=Object(f.b)("diary/retrieveDeepVampire",(function(e,t){return function(e,t){return ee.apply(this,arguments)}(N(t),e)})),ue=W("event",re),de=W("memory",ne),je=W("experience",ae),be=W("skill",ce),he=W("resource",ie),pe=W("character",se),me=W("mark",oe);function ve(e){var t=e.character,r=l(),a=Object(n.useState)(t.isImmortal),c=Object(o.a)(a,2),i=c[0],s=c[1],u=Object(n.useState)(t.description),d=Object(o.a)(u,2),j=d[0],p=d[1];Object(n.useEffect)((function(){s(t.isImmortal)}),[t]);return Object(T.jsx)(U.a,{className:"mt-3",children:Object(T.jsxs)(U.a.Body,{children:[Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:"Mortal Characters die, but immortal Characters do not"}),children:Object(T.jsx)(Y.a,{type:"checkbox",variant:"outline-secondary",value:"1",checked:i,onClick:function(){var e=!i;r(pe.update({id:t.id,isImmortal:e}))},children:"Immortal"})}),Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:i?"Immortal Characters cannot be removed":"Remove this Character"}),children:Object(T.jsx)("span",{className:"d-inline-block",children:Object(T.jsx)(h.a,{variant:"outline-warning",className:"ms-3",disabled:i,onClick:function(){return r(pe.update({id:t.id,isDead:!0}))},children:"Dead"})})}),Object(T.jsx)(h.a,{variant:"outline-danger",className:"ms-3",children:"Delete"}),Object(T.jsx)(b.a,{className:"mt-3",children:Object(T.jsx)(z.a,{as:_.DebounceInput,forceNotifyByEnter:!1,debounceTimeout:1e3,placeholder:"Describe the character...",value:j,onChange:function(e){var n=e.target.value;p(n),r(pe.update({id:t.id,description:n}))},element:Q.a})})]})})}function Oe(e){var t=e.characters;return Object(T.jsx)(T.Fragment,{children:t.map((function(e){return Object(T.jsx)(ve,{character:e},e.id)}))})}function fe(e){var t=e.vampireId,r=l();return Object(T.jsxs)(U.a,{children:[Object(T.jsx)(U.a.Header,{children:"Creation"}),Object(T.jsxs)(U.a.Body,{children:[Object(T.jsx)(U.a.Text,{children:"To create your Vampire:"}),Object(T.jsxs)("ol",{children:[Object(T.jsx)("li",{children:"Give your Vampire a name and description"}),Object(T.jsx)("li",{children:"Create a single Memory and Experience that describes your Vampire's history as a mortal"}),Object(T.jsx)("li",{children:"Create at least three mortal Characters"}),Object(T.jsx)("li",{children:"Give your Vampire three Skills that they practiced as a mortal"}),Object(T.jsx)("li",{children:"Give your Vampire three Resources that they acquired as a mortal"}),Object(T.jsx)("li",{children:"Create three Memories, each with one Experience relating to any two Characters, Skills and/or Resources that you have created"}),Object(T.jsx)("li",{children:"Create an immortal Character who gifted or cursed your Vampire with undeath"}),Object(T.jsx)("li",{children:"Create a Mark, a Memory and an Experience relating to how your Vampire was gifted or cursed with undeath"})]}),Object(T.jsx)(U.a.Text,{children:"Your Vampire should now have three Skills, three Resources, one Mark, at least three mortal Characters, one immortal Character, and five Memories each with one Experience."}),Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:"Generate the first Prompt"}),children:Object(T.jsx)(h.a,{variant:"outline-success",onClick:function(){return r(ue.create({vampire:t}))},children:"Start"})})]})]})}var xe=function(e){var t=e.name,r=e.baseUrl,n=Object(f.c)({selectId:function(e){return e.id}}),a=W(t,$(r)),c=a.query,i=a.create,s=a.retrieve,o=a.update,l=a.remove,u=Object(f.d)({name:t,initialState:n.getInitialState(),reducers:{},extraReducers:function(e){return e.addCase(c.fulfilled,(function(e,t){n.setAll(e,t.payload.results)})).addCase(i.fulfilled,(function(e,t){n.addOne(e,t.payload)})).addCase(s.fulfilled,(function(e,t){n.setOne(e,t.payload)})).addCase(o.fulfilled,(function(e,t){n.setOne(e,t.payload)})).addCase(l.fulfilled,(function(e,t){n.removeOne(e,t.payload)}))}});return{adapter:n,query:c,create:i,retrieve:s,update:o,remove:l,slice:u}}({name:"vampire",baseUrl:"/api/v1/game/vampires/"}),ye=xe.adapter,ge=xe.query,ke=xe.create,Ce=(xe.retrieve,xe.update),we=xe.remove,Se=xe.slice,Ie=ye.getSelectors((function(e){return e.vampire})),Ne=Object(f.c)({selectId:function(e){return e.id}}),Ee=Object(f.c)({selectId:function(e){return e.id}}),De=Object(f.c)({selectId:function(e){return e.id}}),Ae=Object(f.c)({selectId:function(e){return e.id}}),Te=Object(f.c)({selectId:function(e){return e.id}}),Me=Object(f.c)({selectId:function(e){return e.id}}),Fe=Object(f.c)({selectId:function(e){return e.id}});function Be(e,t,r,n){return e.addCase(n.create.fulfilled,(function(e,n){var a=t(e);r.addOne(a,n.payload)})).addCase(n.update.fulfilled,(function(e,n){var a=t(e);r.upsertOne(a,n.payload)})).addCase(n.remove.fulfilled,(function(e,n){var a=t(e);r.removeOne(a,n.payload)}))}var Le=Object(f.d)({name:"diary",initialState:{vampire:void 0,currentEventIndex:void 0,event:Ne.getInitialState(),memory:Ee.getInitialState(),experience:De.getInitialState(),skill:Ae.getInitialState(),resource:Te.getInitialState(),character:Me.getInitialState(),mark:Fe.getInitialState()},reducers:{eventStart:function(e){void 0!==e.currentEventIndex&&(e.currentEventIndex=0)},eventEnd:function(e){void 0!==e.currentEventIndex&&(e.currentEventIndex=e.event.ids.length-1)},eventBack:function(e){void 0!==e.currentEventIndex&&0!==e.currentEventIndex&&e.currentEventIndex--},eventForward:function(e){void 0===e.currentEventIndex||e.currentEventIndex>=e.event.ids.length-1||e.currentEventIndex++}},extraReducers:function(e){var t=e.addCase(le.fulfilled,(function(e,t){var r=t.payload;e.vampire={id:r.id,name:r.name,description:r.description,isDead:r.isDead};var n=r.events;if(n.length>0){var a=n.length-1;e.currentEventIndex=a}Ne.setAll(e.event,r.events),Ee.setAll(e.memory,r.memories),De.setAll(e.experience,r.experiences),Ae.setAll(e.skill,r.skills),Te.setAll(e.resource,r.resources),Me.setAll(e.character,r.characters),Fe.setAll(e.mark,r.marks)}));return t=Be(t=(t=(t=(t=t.addCase(Ce.fulfilled,(function(e,t){e.vampire=t.payload}))).addCase(ue.create.fulfilled,(function(e,t){Ne.addOne(e.event,t.payload);var r=e.event.ids.length-1;e.currentEventIndex=r}))).addCase(ue.update.fulfilled,(function(e,t){Ne.upsertOne(e.event,t.payload)}))).addCase(ue.remove.fulfilled,(function(e,t){Ne.removeOne(e.event,t.payload)})),(function(e){return e.memory}),Ee,de),t=Be(t,(function(e){return e.experience}),De,je),t=Be(t,(function(e){return e.skill}),Ae,be),t=Be(t,(function(e){return e.resource}),Te,he),t=Be(t,(function(e){return e.character}),Me,pe),t=Be(t,(function(e){return e.mark}),Fe,me)}}),Ve=Le.actions,Re=Ve.eventStart,Pe=Ve.eventEnd,Ge=Ve.eventBack,qe=Ve.eventForward,Ke=function(e){return e.diary.vampire},He=function(e){var t,r;return null!==(t=null===(r=e.diary.vampire)||void 0===r?void 0:r.isDead)&&void 0!==t&&t},Je=function(e){return 0===$e(e).length&&0===tt(e).length},Ue=function(e){return 0===e.diary.currentEventIndex},Ye=function(e){return void 0!==e.diary.currentEventIndex&&e.diary.currentEventIndex===e.diary.event.ids.length-1},ze=function(e){var t=e.diary.currentEventIndex;if(void 0!==t){var r=e.diary.event.ids[t];return e.diary.event.entities[r]}},_e=function(e){var t=e.diary.currentEventIndex;if(void 0!==t&&0!==t){var r=t-1,n=e.diary.event.ids[r];return e.diary.event.entities[n]}},Qe=(Ne.getSelectors((function(e){return e.diary.event})),Ee.getSelectors((function(e){return e.diary.memory}))),We=function(e){return Qe.selectAll(e).filter((function(e){return!e.isForgotten&&null===e.diary}))},Xe=De.getSelectors((function(e){return e.diary.experience})),Ze=Ae.getSelectors((function(e){return e.diary.skill})),$e=function(e){return Ze.selectAll(e).filter((function(e){return!e.isChecked}))},et=Te.getSelectors((function(e){return e.diary.resource})),tt=function(e){return et.selectAll(e).filter((function(e){return!e.isLost}))},rt=function(e){var t;return null!==(t=et.selectAll(e).find((function(e){return e.isDiary&&!e.isLost})))&&void 0!==t?t:null},nt=function(e){return function(e){var t=rt(e);return null===t?[]:Qe.selectAll(e).filter((function(e){return e.diary===t.id}))}(e).length>=4},at=Me.getSelectors((function(e){return e.diary.character})),ct=function(e){return at.selectAll(e).filter((function(e){return!e.isDead}))},it=Fe.getSelectors((function(e){return e.diary.mark})),st=r(120);function ot(e){var t=e.vampireId,r=e.currentEvent,a=l(),c=u(Ue),i=u(Ye),s=u(He),d=u(Je),j=u(_e),p=Object(n.useState)(r.description),m=Object(o.a)(p,2),v=m[0],O=m[1];Object(n.useEffect)((function(){O(r.description)}),[r]);return Object(T.jsxs)(U.a,{children:[Object(T.jsxs)(U.a.Header,{children:["Prompt ",r.prompt,r.visit]}),Object(T.jsxs)(U.a.Body,{children:[Object(T.jsxs)(st.a,{className:"mb-3",children:[Object(T.jsx)(h.a,{variant:"outline-secondary",disabled:c,onClick:function(){return a(Re())},children:"First"}),Object(T.jsx)(h.a,{variant:"outline-secondary",disabled:i,onClick:function(){return a(Pe())},children:"Last"})]}),Object(T.jsxs)(st.a,{className:"ms-3 mb-3",children:[Object(T.jsx)(h.a,{variant:"outline-secondary",disabled:!j,onClick:function(){return a(Ge())},children:"Previous"}),Object(T.jsx)(h.a,{variant:i?"outline-success":"outline-secondary",disabled:i&&s,onClick:function(){a(i?ue.create({vampire:t}):qe())},children:"Next"})]}),d&&!s?Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsxs)(q.a,{children:[Object(T.jsx)("p",{children:"You die if a Prompt forces you to check a Skill or lose a Resource but you have none."}),Object(T.jsx)("p",{children:"Describe how your Vampire dies and then click this button to end the game."})]}),children:Object(T.jsx)(h.a,{variant:"outline-danger",className:"ms-3 mb-3",onClick:function(){return a(Ce({id:t,isDead:!0}))},children:"Dead"})}):null,Object(T.jsx)(U.a.Text,{children:null===r||void 0===r?void 0:r.promptDescription}),Object(T.jsx)(b.a,{children:Object(T.jsx)(z.a,{as:_.DebounceInput,forceNotifyByEnter:!1,debounceTimeout:1e3,placeholder:"Describe what happens...",value:v,onChange:function(e){var t=e.target.value;O(t),a(ue.update({id:r.id,description:t}))},element:Q.a})})]})]})}function lt(e){var t=e.mark,r=l(),a=Object(n.useState)(t.description),c=Object(o.a)(a,2),i=c[0],s=c[1];return Object(T.jsxs)(V.a,{children:[Object(T.jsx)(R.a,{children:Object(T.jsx)(b.a,{className:"mt-3",children:Object(T.jsx)(z.a,{as:_.DebounceInput,element:Q.a,forceNotifyByEnter:!1,debounceTimeout:1e3,placeholder:"Describe the mark...",value:i,onChange:function(e){var n=e.target.value;s(n),r(me.update({id:t.id,description:n}))}})})}),Object(T.jsx)(R.a,{xs:"auto",children:Object(T.jsx)(h.a,{variant:"outline-danger",className:"mt-3",children:"Delete"})})]})}function ut(e){var t=e.marks;return Object(T.jsx)(T.Fragment,{children:t.map((function(e){return Object(T.jsx)(lt,{mark:e},e.id)}))})}function dt(e){var t=e.experience,r=l(),a=Object(n.useState)(t.description),c=Object(o.a)(a,2),i=c[0],s=c[1];return Object(T.jsxs)(V.a,{className:"mt-3",children:[Object(T.jsx)(R.a,{children:Object(T.jsx)(b.a,{children:Object(T.jsx)(z.a,{as:_.DebounceInput,forceNotifyByEnter:!1,debounceTimeout:1e3,placeholder:"Describe the experience...",value:i,onChange:function(e){var n=e.target.value;s(n),r(je.update({id:t.id,description:n}))},element:Q.a})})}),Object(T.jsx)(R.a,{xs:"auto",children:Object(T.jsx)(h.a,{variant:"outline-danger",children:"Delete"})})]})}function jt(e){var t=e.experiences;return Object(T.jsx)(T.Fragment,{children:t.map((function(e,t){return Object(T.jsx)(dt,{experience:e},e.id)}))})}function bt(e){var t=e.memory,r=e.experiences,n=l(),a=u(rt),c=u(nt),i=r.length>=3;return Object(T.jsxs)(U.a,{className:"mt-3",children:[Object(T.jsx)(U.a.Header,{children:"Experiences"}),Object(T.jsxs)(U.a.Body,{children:[Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:i?"A Memory can only hold three Experiences":"Add a new Experience"}),children:Object(T.jsx)("span",{className:"d-inline-block",children:Object(T.jsx)(h.a,{disabled:i,variant:"outline-success",onClick:function(){return n(je.create({memory:t.id,description:""}))},children:"Create"})})}),Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:null===a?"Your Vampire does not have a Diary":c?"A Diary can only hold four Memories":"Move this Memory to your Diary"}),children:Object(T.jsx)("span",{className:"d-inline-block",children:Object(T.jsx)(h.a,{disabled:null===a||c,variant:"outline-secondary",className:"ms-3",onClick:function(){return n(de.update({id:t.id,diary:a.id}))},children:"Diary"})})}),Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:"Remove this Memory"}),children:Object(T.jsx)(h.a,{className:"ms-3",variant:"outline-warning",onClick:function(){return n(de.update({id:t.id,isForgotten:!0}))},children:"Forget"})}),Object(T.jsx)(h.a,{variant:"outline-danger",className:"ms-3",children:"Delete"}),Object(T.jsx)(jt,{experiences:r})]})]})}function ht(e){var t=e.memories,r=e.experiences.reduce((function(e,t){var r=e.get(t.memory);return r?r.push(t):e.set(t.memory,[t]),e}),new Map);return Object(T.jsx)(T.Fragment,{children:t.map((function(e){var t;return Object(T.jsx)(bt,{memory:e,experiences:null!==(t=r.get(e.id))&&void 0!==t?t:[]},e.id)}))})}function pt(e){var t=e.resource,r=l(),a=Object(n.useState)(t.description),c=Object(o.a)(a,2),i=c[0],s=c[1],d=Object(n.useState)(t.isDiary),j=Object(o.a)(d,2),p=j[0],m=j[1],v=null!==u(rt)&&!p;Object(n.useEffect)((function(){m(t.isDiary)}),[t]);return Object(T.jsx)(U.a,{className:"mt-3",children:Object(T.jsxs)(U.a.Body,{children:[Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:v?"A Vampire can only hold one Diary":"A Diary can hold up to four Memories"}),children:Object(T.jsx)("span",{className:"d-inline-block",children:Object(T.jsx)(Y.a,{type:"checkbox",variant:"outline-secondary",value:"1",disabled:v,checked:p,onClick:function(){var e=!p;r(he.update({id:t.id,isDiary:e}))},children:"Diary"})})}),Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:"Remove this Resource"}),children:Object(T.jsx)(h.a,{variant:"outline-warning",className:"ms-3",onClick:function(){return r(he.update({id:t.id,isLost:!0}))},children:"Lost"})}),Object(T.jsx)(h.a,{variant:"outline-danger",className:"ms-3",children:"Delete"}),Object(T.jsx)(b.a,{children:Object(T.jsx)(z.a,{className:"mt-3",as:_.DebounceInput,element:Q.a,forceNotifyByEnter:!1,debounceTimeout:1e3,placeholder:"Describe the resource...",value:i,onChange:function(e){var n=e.target.value;s(n),r(he.update({id:t.id,description:n}))}})})]})})}function mt(e){var t=e.resources;return Object(T.jsx)(T.Fragment,{children:t.map((function(e){return Object(T.jsx)(pt,{resource:e},e.id)}))})}function vt(e){var t=e.skill,r=l(),a=Object(n.useState)(t.description),c=Object(o.a)(a,2),i=c[0],s=c[1];return Object(T.jsx)(U.a,{className:"mt-3",children:Object(T.jsxs)(U.a.Body,{children:[Object(T.jsx)(G.a,{placement:"right",delay:B,overlay:Object(T.jsx)(q.a,{children:"Remove this Skill"}),children:Object(T.jsx)(h.a,{variant:"outline-warning",onClick:function(){return r(be.update({id:t.id,isChecked:!0}))},children:"Check"})}),Object(T.jsx)(h.a,{variant:"outline-danger",className:"ms-3",children:"Delete"}),Object(T.jsx)(b.a,{className:"mt-3",children:Object(T.jsx)(z.a,{as:_.DebounceInput,element:Q.a,forceNotifyByEnter:!1,debounceTimeout:1e3,placeholder:"Describe the skill...",value:i,onChange:function(e){var n=e.target.value;s(n),r(be.update({id:t.id,description:n}))}})})]})})}function Ot(e){var t=e.skills;return Object(T.jsx)(T.Fragment,{children:t.map((function(e){return Object(T.jsx)(vt,{skill:e},e.id)}))})}var ft=r(89);function xt(e){var t=e.vampire,r=l(),a=Object(p.g)(),c=Object(n.useState)(t.name),i=Object(o.a)(c,2),s=i[0],u=i[1],d=Object(n.useState)(t.description),j=Object(o.a)(d,2),m=j[0],f=j[1];Object(n.useEffect)((function(){u(t.name),f(t.description)}),[t]);var x=function(){var e=Object(O.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(we(t.id));case 2:a("/vampires");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:"Remove this Vampire"}),children:Object(T.jsx)(h.a,{variant:"outline-danger",onClick:x,children:"Delete"})}),Object(T.jsxs)(b.a,{className:"mt-3",children:[Object(T.jsx)(ft.a,{children:"Name"}),Object(T.jsx)(z.a,{as:_.DebounceInput,forceNotifyByEnter:!1,debounceTimeout:1e3,placeholder:"Name your vampire...",value:s,onChange:function(e){var n=e.target.value;u(n),r(Ce({id:t.id,name:n}))}})]}),Object(T.jsxs)(b.a,{className:"mt-3",children:[Object(T.jsx)(ft.a,{children:"Description"}),Object(T.jsx)(z.a,{as:_.DebounceInput,forceNotifyByEnter:!1,element:Q.a,debounceTimeout:1e3,placeholder:"Describe your vampire...",value:m,onChange:function(e){var n=e.target.value;f(n),r(Ce({id:t.id,description:n}))}})]})]})}function yt(){var e=Object(p.h)().id,t=parseInt(e),r=l(),a=u(Ke),c=u(ze),i=u(We),s=i.length>=5,o=u(Xe.selectAll),j=u($e),b=u(ct),m=u(tt),v=u(it.selectAll);Object(n.useEffect)((function(){r(le(t))}),[t,r]);return a?Object(T.jsx)(d.a,{className:"my-3",children:Object(T.jsxs)(V.a,{children:[Object(T.jsx)(R.a,{md:!0,className:"mb-3",children:Object(T.jsxs)(P.a,{defaultActiveKey:"vampire",children:[Object(T.jsxs)(J.a,{eventKey:"vampire",children:[Object(T.jsx)(H.a,{children:"Vampire"}),Object(T.jsx)(K.a,{children:Object(T.jsx)(xt,{vampire:a})})]}),Object(T.jsxs)(J.a,{eventKey:"memories",children:[Object(T.jsx)(H.a,{children:"Memories"}),Object(T.jsxs)(K.a,{children:[Object(T.jsx)(G.a,{placement:"right",delay:B,overlay:Object(T.jsx)(q.a,{children:s?"A Vampire can only remember five Memories":"Add a new Memory"}),children:Object(T.jsx)("span",{className:"d-inline-block",children:Object(T.jsx)(h.a,{disabled:s,variant:"outline-success",onClick:function(){return r(de.create({vampire:t}))},children:"Create"})})}),Object(T.jsx)(h.a,{variant:"outline-primary",className:"ms-3",children:"Show All"}),Object(T.jsx)(ht,{memories:i,experiences:o})]})]}),Object(T.jsxs)(J.a,{eventKey:"skills",children:[Object(T.jsx)(H.a,{children:"Skills"}),Object(T.jsxs)(K.a,{children:[Object(T.jsx)(G.a,{placement:"right",delay:B,overlay:Object(T.jsx)(q.a,{children:"Add a new Skill"}),children:Object(T.jsx)(h.a,{variant:"outline-success",onClick:function(){return r(be.create({vampire:t,description:""}))},children:"Create"})}),Object(T.jsx)(h.a,{variant:"outline-primary",className:"ms-3",children:"Show All"}),Object(T.jsx)(Ot,{skills:j})]})]}),Object(T.jsxs)(J.a,{eventKey:"resources",children:[Object(T.jsx)(H.a,{children:"Resources"}),Object(T.jsxs)(K.a,{children:[Object(T.jsx)(G.a,{placement:"right",delay:B,overlay:Object(T.jsx)(q.a,{children:"Add a new Resource"}),children:Object(T.jsx)(h.a,{variant:"outline-success",onClick:function(){return r(he.create({vampire:t,description:"",isDiary:!1}))},children:"Create"})}),Object(T.jsx)(h.a,{variant:"outline-primary",className:"ms-3",children:"Show All"}),Object(T.jsx)(mt,{resources:m})]})]}),Object(T.jsxs)(J.a,{eventKey:"characters",children:[Object(T.jsx)(H.a,{children:"Characters"}),Object(T.jsxs)(K.a,{children:[Object(T.jsx)(G.a,{placement:"right",delay:B,overlay:Object(T.jsx)(q.a,{children:"Add a new Character"}),children:Object(T.jsx)(h.a,{variant:"outline-success",onClick:function(){return r(pe.create({vampire:t,name:"",description:"",isImmortal:!1}))},children:"Create"})}),Object(T.jsx)(h.a,{variant:"outline-primary",className:"ms-3",children:"Show All"}),Object(T.jsx)(Oe,{characters:b})]})]}),Object(T.jsxs)(J.a,{eventKey:"marks",children:[Object(T.jsx)(H.a,{children:"Marks"}),Object(T.jsxs)(K.a,{children:[Object(T.jsx)(G.a,{placement:"right",delay:B,overlay:Object(T.jsx)(q.a,{children:"Add a new Mark"}),children:Object(T.jsx)(h.a,{variant:"outline-success",onClick:function(){return r(me.create({vampire:t,description:""}))},children:"Create"})}),Object(T.jsx)(ut,{marks:v})]})]})]})}),Object(T.jsx)(R.a,{md:!0,children:c?Object(T.jsx)(ot,{vampireId:t,currentEvent:c}):Object(T.jsx)(fe,{vampireId:t})})]})}):Object(T.jsx)(L.a,{animation:"border"})}var gt=r(46),kt=r(129),Ct="/api/v1/game/prompt-groups/";function wt(){return(wt=Object(O.a)(v.a.mark((function e(t,r){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Z(Ct,r),e.next=3,t(n);case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var St=Object(f.c)({selectId:function(e){return e.id},sortComparer:function(e,t){return e.id-t.id}}),It=Object(f.b)("promptGroup/queryPromptGroups",(function(e,t){return function(e,t){return wt.apply(this,arguments)}(N(t),e)})),Nt=Object(f.d)({name:"promptGroup",initialState:St.getInitialState(),reducers:{},extraReducers:function(e){return e.addCase(It.fulfilled,(function(e,t){St.setAll(e,t.payload.results)}))}}),Et=St.getSelectors((function(e){return e.promptGroup})),Dt=r(91);function At(e){var t=e.onCancel,r=e.onSubmit,a=l(),c=u(Et.selectAll),i=Object(n.useState)(null),s=Object(o.a)(i,2),j=s[0],p=s[1],m=Object(n.useState)(null),v=Object(o.a)(m,2),O=v[0],f=v[1];return Object(n.useEffect)((function(){a(It())}),[a]),Object(T.jsxs)(d.a,{className:"py-3",children:[Object(T.jsx)("h2",{children:"Create Vampire"}),Object(T.jsxs)(b.a,{children:[Object(T.jsx)(ft.a,{children:"Name"}),Object(T.jsx)(z.a,{placeholder:"Enter a name...",onChange:function(e){return p(e.target.value)}})]}),Object(T.jsxs)(b.a,{className:"mt-3",children:[Object(T.jsx)(ft.a,{children:"Prompt Group"}),Object(T.jsxs)(Dt.a,{onChange:function(e){var t=null;""!==e.target.value&&(t=parseInt(e.target.value)),f(t)},children:[Object(T.jsx)("option",{value:"",children:"Select a prompt group..."}),c.map((function(e){return Object(T.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]}),Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:"Discard changes"}),children:Object(T.jsx)(h.a,{variant:"outline-danger",className:"mt-3",onClick:t,children:"Cancel"})}),Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:"Go to the Diary page"}),children:Object(T.jsx)(h.a,{variant:"outline-success",className:"mt-3 ms-3",disabled:!(j&&null!==O),onClick:function(){r&&r({name:j,description:"",promptGroup:O})},children:"Create"})})]})}r(109);var Tt=r(124);function Mt(){var e=l(),t=u(Ie.selectAll),r=Object(p.g)();return Object(n.useEffect)((function(){e(ge({sort:["created_at","-"]}))}),[e]),Object(T.jsxs)(Tt.a,{striped:!0,bordered:!0,hover:!0,children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Description"}),Object(T.jsx)("th",{children:"Game Over"})]})}),Object(T.jsx)("tbody",{children:t.map((function(e){return Object(T.jsxs)("tr",{className:"vampire-list-item",onClick:function(){return r("/vampires/".concat(e.id))},children:[Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.description}),Object(T.jsx)("td",{children:e.isDead?"Yes":"No"})]},e.id)}))})]})}function Ft(){var e=l(),t=Object(p.g)(),r=Object(n.useState)(!1),a=Object(o.a)(r,2),c=a[0],i=a[1],s=function(){return i(!1)},u=function(){var r=Object(O.a)(v.a.mark((function r(n){var a;return v.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e(ke(n)).unwrap();case 2:a=r.sent,s(),t("/vampires/".concat(a.id));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(T.jsxs)(d.a,{className:"mt-3",children:[Object(T.jsx)(G.a,{placement:"bottom",delay:B,overlay:Object(T.jsx)(q.a,{children:"Create a new Vampire"}),children:Object(T.jsx)(h.a,{variant:"outline-success",className:"mb-3",onClick:function(){return i(!0)},children:"Create"})}),Object(T.jsx)(Mt,{}),Object(T.jsx)(kt.a,{show:c,onHide:s,children:Object(T.jsx)(At,{onCancel:s,onSubmit:u})})]})}var Bt=r(127),Lt=r(126);function Vt(){var e=u(A),t=l();return Object(T.jsx)(Bt.a,{bg:"light",expand:"lg",fixed:"top",children:Object(T.jsxs)(d.a,{children:[Object(T.jsx)(Bt.a.Brand,{href:"/",children:"Vampire Diary"}),Object(T.jsx)(Bt.a.Toggle,{}),Object(T.jsxs)(Bt.a.Collapse,{children:[Object(T.jsx)(Lt.a,{children:e?Object(T.jsx)(Lt.a.Link,{as:gt.b,to:"/vampires",children:"Vampires"}):null}),Object(T.jsx)(Lt.a,{className:"ms-auto",children:e?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Lt.a.Link,{as:gt.b,to:"/settings",children:"Account"}),Object(T.jsx)(Lt.a.Link,{href:"#",onClick:function(){return t(E())},children:"Logout"})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Lt.a.Link,{as:gt.b,to:"/register",children:"Register"}),Object(T.jsx)(Lt.a.Link,{as:gt.b,to:"/login",children:"Login"})," "]})})]})]})})}function Rt(){var e=u(A);return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(gt.a,{children:[Object(T.jsx)(Vt,{}),Object(T.jsxs)(p.d,{children:[Object(T.jsx)(p.b,{path:"/vampires/:id",element:Object(T.jsx)(F,{children:Object(T.jsx)(yt,{})})}),Object(T.jsx)(p.b,{path:"/vampires",element:Object(T.jsx)(F,{children:Object(T.jsx)(Ft,{})})}),Object(T.jsx)(p.b,{path:"/settings"}),Object(T.jsx)(p.b,{path:"/login",element:Object(T.jsx)(M,{})}),Object(T.jsx)(p.b,{path:"*",element:Object(T.jsx)(p.a,{to:e?"/vampires":"/login"})})]})]})})}var Pt=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,131)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))},Gt=Object(f.a)({reducer:{auth:D.reducer,promptGroup:Nt.reducer,vampire:Se.reducer,diary:Le.reducer}});i.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(s.a,{store:Gt,children:Object(T.jsx)(Rt,{})})}),document.getElementById("root")),Pt()},95:function(e,t,r){}},[[112,1,2]]]);
//# sourceMappingURL=main.26eb5692.chunk.js.map